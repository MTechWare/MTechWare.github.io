<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WinTool Plugins - Extend Your Toolkit</title>
    
    <!-- MTech Simplified Theme -->
    <link rel="stylesheet" href="mtech-simplified.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root.theme-orange {
    --primary-color: #ff6b35;
    --primary-dark: #e55a2b;
    --primary-rgb: 255,107,53;
    --primary-dark-rgb: 229,90,43;
  }
  :root.theme-green {
    --primary-color: #43a047;
    --primary-dark: #388e3c;
    --primary-rgb: 67,160,71;
    --primary-dark-rgb: 56,142,60;
  }
  :root.theme-blue {
    --primary-color: #2196f3;
    --primary-dark: #1976d2;
    --primary-rgb: 33,150,243;
    --primary-dark-rgb: 25,118,210;
  }
  :root.theme-purple {
    --primary-color: #9c27b0;
    --primary-dark: #7b1fa2;
    --primary-rgb: 156,39,176;
    --primary-dark-rgb: 123,31,162;
  }
  :root.theme-red {
    --primary-color: #f44336;
    --primary-dark: #d32f2f;
    --primary-rgb: 244,67,54;
    --primary-dark-rgb: 211,47,47;
  }
  :root.theme-teal {
    --primary-color: #009688;
    --primary-dark: #00796b;
    --primary-rgb: 0,150,136;
    --primary-dark-rgb: 0,121,107;
  }
  :root.theme-custom {
    /* Custom theme colors will be set dynamically via JavaScript */
  }
  .mtech-text-primary {
    color: var(--primary-color) !important;
  }
  .mtech-gradient-primary {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%) !important;
  }
  .mtech-gradient-primary-text {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
  }
  .mtech-navbar-theme {
    border: 1px solid rgba(var(--primary-rgb), 0.2) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1), 0 0 15px rgba(var(--primary-rgb), 0.1) !important;
  }
  .mtech-bg-primary-alpha08 {
    background: rgba(var(--primary-rgb), 0.08) !important;
  }
  .mtech-bg-primary-alpha02 {
    background: rgba(var(--primary-rgb), 0.2) !important;
  }
  .mtech-bg-primary-alpha015 {
    background: rgba(var(--primary-rgb), 0.15) !important;
  }
  .mtech-bg-primary-alpha01 {
    background: rgba(var(--primary-rgb), 0.1) !important;
  }
  .mtech-border-primary {
    border-color: rgba(var(--primary-rgb), 0.2) !important;
  }
  .mtech-border-primary-01 {
    border-color: rgba(var(--primary-rgb), 0.1) !important;
  }
  .mtech-shadow-primary {
    box-shadow: 0 2px 10px rgba(var(--primary-rgb), 0.3) !important;
  }

  /* Color Picker Modal Styles */
  .theme-preset-btn:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3) !important;
  }

  .modal-close-btn:hover {
    color: var(--primary-color) !important;
    transform: scale(1.1) !important;
  }

  #custom-color-picker:hover {
    transform: scale(1.05) !important;
  }

  #apply-custom-color:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 8px 25px rgba(var(--primary-rgb), 0.4) !important;
  }
  .verified-badge {
    color: var(--primary-color);
    font-size: 0.8rem;
    margin-left: 5px;
  }
</style>
</head>
<body style="padding-top: 0;">
    <!-- Background Effects -->
    <div class="mtech-bg-pattern"></div>
    <div class="mtech-particles"></div>

    <!-- Navigation Bar -->
    <header class="mtech-navbar-theme" style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%); width: 88%; max-width: 1100px; z-index: 9999; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border-radius: 15px; padding: 12px 24px; transition: all 0.3s ease;">
      <nav style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
        <!-- Left Section: Logo & Status -->
        <div style="display: flex; align-items: center; gap: 12px;">
            <a href="index.html" style="display: flex; align-items: center; gap: 10px; text-decoration: none; transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'">
                <div class="mtech-gradient-primary mtech-shadow-primary" style="width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; color: #000; font-weight: 700; transition: all 0.3s ease;">
                    <i class="fas fa-microchip"></i>
                </div>
                <div style="display: flex; flex-direction: column;">
                    <span class="mtech-gradient-primary-text" style="font-weight: 700; font-size: 1.1rem; line-height: 1;">MTechWare</span>
                    <span style="font-size: 0.6rem; color: #888; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; font-family: 'Roboto Mono', monospace;">IT Professional</span>
                </div>
            </a>
            
            <!-- Status Indicator -->
            <div style="display: flex; align-items: center; gap: 6px; padding: 4px 10px; background: rgba(76, 175, 80, 0.1); border: 1px solid rgba(76, 175, 80, 0.3); border-radius: 20px; backdrop-filter: blur(10px);">
                <div style="width: 6px; height: 6px; background: #4caf50; border-radius: 50%; animation: pulse 2s infinite;"></div>
                <span style="font-size: 0.6rem; color: #4caf50; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; font-family: 'Roboto Mono', monospace;">Online</span>
            </div>
        </div>

        <!-- Right Section: Navigation Links & Mobile Menu Toggle -->
        <div style="display: flex; align-items: center; gap: 16px;">
            <!-- Navigation Links -->
            <div class="mtech-bg-primary-alpha08" style="display: flex; align-items: center; gap: 4px; border-radius: 12px; padding: 4px;">
                <a href="index.html" style="color: #d0d0d0; text-decoration: none; font-size: 0.8rem; font-weight: 600; padding: 8px 14px; border-radius: 8px; transition: all 0.3s ease;" onmouseover="this.style.color='#fff'; this.style.background='linear-gradient(135deg, rgba(var(--primary-rgb), 0.15), rgba(var(--primary-dark-rgb), 0.15))'; this.style.transform='translateY(-1px)'" onmouseout="this.style.color='#d0d0d0'; this.style.background='transparent'; this.style.transform='translateY(0)'">
                    <i class="fas fa-home" style="margin-right: 6px; font-size: 0.7rem;"></i>Home
                </a>
                <a href="wintool.html" style="color: #d0d0d0; text-decoration: none; font-size: 0.8rem; font-weight: 600; padding: 8px 14px; border-radius: 8px; transition: all 0.3s ease;" onmouseover="this.style.color='#fff'; this.style.background='linear-gradient(135deg, rgba(var(--primary-rgb), 0.15), rgba(var(--primary-dark-rgb), 0.15))'; this.style.transform='translateY(-1px)'" onmouseout="this.style.color='#d0d0d0'; this.style.background='transparent'; this.style.transform='translateY(0)'">
                    <i class="fas fa-tools" style="margin-right: 6px; font-size: 0.7rem;"></i>WinTool
                </a>
                <a href="plugins.html" class="mtech-gradient-primary mtech-shadow-primary" style="color: #fff; text-decoration: none; font-size: 0.8rem; font-weight: 600; padding: 8px 14px; border-radius: 8px; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(var(--primary-rgb), 0.3)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(var(--primary-rgb), 0.2)';">
                    <i class="fas fa-puzzle-piece" style="margin-right: 6px; font-size: 0.7rem;"></i>Plugins
                </a>
            </div>
            
            <!-- Mobile Menu Toggle -->
            <button class="menu-toggle mtech-bg-primary-alpha01 mtech-border-primary" style="display: none; color: #e8e8e8; font-size: 1rem; padding: 8px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;" aria-label="Toggle menu" aria-expanded="false" onmouseover="this.style.background='rgba(var(--primary-rgb), 0.2)'; this.style.borderColor='rgba(var(--primary-rgb), 0.5)';" onmouseout="this.style.background='rgba(var(--primary-rgb), 0.1)'; this.style.borderColor='rgba(var(--primary-rgb), 0.3)';">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <!-- Mobile Navigation -->
        <ul class="mobile-nav mtech-border-primary" style="display: none; position: absolute; top: 100%; left: 0; width: 100%; background: rgba(8, 8, 8, 0.95); backdrop-filter: blur(20px); flex-direction: column; padding: 20px 0; text-align: center; border-top: none; border-radius: 0 0 20px 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.4); list-style: none; margin: 0; padding: 0;">
             <li style="width: 100%;"><a class="mtech-border-primary-01" href="index.html" style="display: block; padding: 16px 30px; color: #d0d0d0; font-size: 1rem; font-weight: 600; text-decoration: none; transition: all 0.3s ease; border-bottom: 1px solid rgba(var(--primary-rgb), 0.1);" onmouseover="this.style.background='rgba(var(--primary-rgb), 0.1)'; this.style.color='var(--primary-color)'" onmouseout="this.style.background='transparent'; this.style.color='#d0d0d0'"><i class="fas fa-home" style="margin-right: 8px;"></i>Home</a></li>
             <li style="width: 100%;"><a class="mtech-border-primary-01" href="wintool.html" style="display: block; padding: 16px 30px; color: #d0d0d0; font-size: 1rem; font-weight: 600; text-decoration: none; transition: all 0.3s ease; border-bottom: 1px solid rgba(var(--primary-rgb), 0.1);" onmouseover="this.style.background='rgba(var(--primary-rgb), 0.1)'; this.style.color='var(--primary-color)'" onmouseout="this.style.background='transparent'; this.style.color='#d0d0d0'"><i class="fas fa-tools" style="margin-right: 8px;"></i>WinTool</a></li>
             <li style="width: 100%;"><a class="mtech-border-primary-01" href="plugins.html" style="display: block; padding: 16px 30px; color: var(--primary-color); font-size: 1rem; font-weight: 600; text-decoration: none; transition: all 0.3s ease; border-bottom: 1px solid rgba(var(--primary-rgb), 0.1); background: rgba(var(--primary-rgb), 0.1);" onmouseover="this.style.background='rgba(var(--primary-rgb), 0.2)'" onmouseout="this.style.background='rgba(var(--primary-rgb), 0.1)'"><i class="fas fa-puzzle-piece" style="margin-right: 8px;"></i>Plugins</a></li>
         </ul>
      </nav>
    </header>

    <!-- Add CSS for animations -->
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }
        
        @media (max-width: 768px) {
            header {
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                width: 100% !important;
                max-width: none !important;
                border-radius: 0 !important;
                border-left: none !important;
                border-right: none !important;
                border-top: none !important;
                padding: 8px 16px !important;
                transform: none !important;
            }
            
            header nav > div:nth-child(2) > div {
                display: none !important;
            }
            
            header nav > div:nth-child(2) .menu-toggle {
                display: block !important;
            }
            
            .mobile-nav.active {
                display: flex !important;
            }
        }
        
        @media (max-width: 480px) {
            header {
                padding: 6px 12px !important;
            }
            
            header nav > div:nth-child(1) a > div:nth-child(1) {
                width: 32px !important;
                height: 32px !important;
                font-size: 1rem !important;
            }
            
            header nav > div:nth-child(1) a > div:nth-child(2) span:nth-child(1) {
                font-size: 1rem !important;
            }
            
            header nav > div:nth-child(1) > div:nth-child(2) {
                display: none !important;
            }
            
            header nav > div:nth-child(3) a {
                padding: 6px 12px !important;
                font-size: 0.7rem !important;
            }
        }
    </style>

    <script>
        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const menuToggle = document.querySelector('.menu-toggle');
            const mobileNavUl = document.querySelector('nav ul.mobile-nav');
            
            if (menuToggle && mobileNavUl) {
                menuToggle.addEventListener('click', function() {
                    const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                    mobileNavUl.classList.toggle('active');
                    menuToggle.setAttribute('aria-expanded', !isExpanded);
                    
                    const icon = menuToggle.querySelector('i');
                    if (icon) {
                        icon.classList.toggle('fa-bars');
                        icon.classList.toggle('fa-times');
                    }
                });
                
                // Close mobile menu when clicking on links
                mobileNavUl.querySelectorAll('a').forEach(function(link) {
                    link.addEventListener('click', function() {
                        if (mobileNavUl.classList.contains('active')) {
                            mobileNavUl.classList.remove('active');
                            menuToggle.setAttribute('aria-expanded', 'false');
                            const icon = menuToggle.querySelector('i');
                            if (icon) {
                                icon.classList.remove('fa-times');
                                icon.classList.add('fa-bars');
                            }
                        }
                    });
                });
            }
        });
    </script>

    <!-- Hero Section for Plugins -->
    <section class="mtech-hero-header">
        <div class="mtech-hero-content mtech-mt-xl">
            <div class="mtech-hero-subtitle mtech-text-primary" style="font-weight: 600; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px;">
                WinTool Plugin Ecosystem
            </div>
            <h1 class="mtech-hero-title">
                Plugin Library (Beta)
            </h1>
            <p class="mtech-hero-description">
                Discover and share community-built plugins to extend and customize your WinTool experience.
            </p>
        </div>
    </section>

    <!-- Featured Plugins Section -->
    <section id="featured-plugins" class="mtech-section">
        <div class="mtech-container">
            <h2 class="mtech-title-lg mtech-text-center mtech-mb-xl">
                <span class="mtech-highlight">Featured Plugins</span>
            </h2>
            <p class="mtech-text-secondary mtech-text-center mtech-mb-xl" style="max-width: 900px; margin-left: auto; margin-right: auto; font-size: 1.2rem;">
                Discover verified plugins that extend WinTool's functionality with additional tools and features.
            </p>
            <div class="mtech-grid mtech-grid-3">
                <!-- Developer Template Plugin -->
                <div class="mtech-card mtech-card-glass mtech-card-hover mtech-card-featured mtech-text-center">
                    <div class="mtech-card-icon">
                        <i class="fas fa-vial"></i>
                    </div>
                    <h3 class="mtech-card-title">Developer Template</h3>
                    <p class="mtech-card-content">A comprehensive plugin template that demonstrates all features of the WinTool API. Perfect for developers who want to create their own plugins with examples of UI components, system integration, and best practices.</p>
                    <div class="mtech-card-footer">
                        <span>By: MTechWare<span class="verified-badge"><i class="fas fa-check-circle"></i> Verified</span></span>
                        <a href="https://github.com/MTechWare/wintool-plugins/blob/main/developer-template.zip" class="mtech-btn mtech-btn-sm mtech-btn-primary"><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
                <!-- System Uptime Plugin -->
                <div class="mtech-card mtech-card-glass mtech-card-hover mtech-text-center">
                    <div class="mtech-card-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3 class="mtech-card-title">System Uptime</h3>
                    <p class="mtech-card-content">Displays how long the system has been running since the last restart with detailed uptime statistics and system boot information.</p>
                    <div class="mtech-card-footer">
                        <span>By: MTechWare<span class="verified-badge"><i class="fas fa-check-circle"></i> Verified</span></span>
                        <a href="https://github.com/MTechWare/wintool-plugins/blob/main/system-uptime.zip" class="mtech-btn mtech-btn-sm mtech-btn-primary"><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
                <!-- Quick Launcher Plugin -->
                <div class="mtech-card mtech-card-glass mtech-card-hover mtech-text-center">
                    <div class="mtech-card-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <h3 class="mtech-card-title">Quick Launcher</h3>
                    <p class="mtech-card-content">A personal dashboard to quickly access your favorite apps, files, and websites with customizable shortcuts and categories.</p>
                    <div class="mtech-card-footer">
                        <span>By: MTechWare<span class="verified-badge"><i class="fas fa-check-circle"></i> Verified</span></span>
                        <a href="https://github.com/MTechWare/wintool-plugins/blob/main/quick-launcher.zip" class="mtech-btn mtech-btn-sm mtech-btn-primary"><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Developer Call to Action Section -->
    <section id="develop" class="mtech-section">
        <div class="mtech-container">
            <div class="mtech-card mtech-card-glass mtech-card-hover" style="padding: 44px 32px; border-radius: 22px; align-items: center; text-align: center; background: rgba(20,20,20,0.92); border: 1.5px solid rgba(var(--primary-rgb),0.13); box-shadow: 0 4px 32px rgba(var(--primary-rgb),0.04); transition: all 0.4s cubic-bezier(0.4,0,0.2,1);">
                <div style="width: 72px; height: 72px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, rgba(var(--primary-rgb),0.18), rgba(var(--primary-dark-rgb),0.13)); border-radius: 20px; margin-bottom: 25px; margin-left: auto; margin-right: auto;">
                    <i class="fas fa-code mtech-text-primary" style="font-size: 2.1rem;"></i>
                </div>
                <h2 class="mtech-title-lg" style="color: #fff; font-size: 1.35rem; margin-bottom: 15px; font-weight: 700;">Become a Plugin Developer</h2>
                <p class="mtech-text-secondary" style="color: #e0cfa6; font-size: 1.01rem; margin: 0; line-height: 1.7;">
                    Have an idea for a tool? The WinTool plugin API is simple to use and allows you to build powerful system utilities with just HTML and JavaScript.
                </p>
                <a href="https://github.com/MTechWare/wintool/blob/main/PLUGIN_DEVELOPMENT.md" target="_blank" class="mtech-btn mtech-btn-primary" style="margin-top: 25px;">
                    <i class="fas fa-book"></i> Read the Developer Guide
                </a>
            </div>
        </div>
    </section>

    <!-- Theme Toggle Button -->
    <div style="position: fixed; bottom: 2rem; right: 2rem; z-index: 1000;">
        <button class="mtech-btn mtech-btn-secondary" id="theme-toggle-btn" type="button">
            <i class="fas fa-palette"></i> Customize Theme
        </button>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" style="position: fixed; bottom: 30px; right: 30px; z-index: 9999;"></div>

    <!-- Include the main script for particles and theme toggling -->
    <script src="mtech-tooltips.js"></script>

    <script>
        // Notification system
        function showNotification(message, type = 'info') {
            const container = document.querySelector('.notification-container');
            const notification = document.createElement('div');
            
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                background: ${type === 'success' ? 'linear-gradient(135deg, #4caf50, #2e7d32)' : 
                           type === 'error' ? 'linear-gradient(135deg, #f44336, #c62828)' : 
                           'linear-gradient(135deg, var(--primary-color), var(--primary-dark))'};
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                margin-bottom: 12px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255,255,255,0.1);
                transform: translateX(100%);
                transition: all 0.3s ease;
                font-weight: 600;
                font-size: 0.9rem;
                max-width: 300px;
                word-wrap: break-word;
            `;
            
            notification.textContent = message;
            container.appendChild(notification);
            
            // Trigger animation
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Auto remove after 4 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 4000);
        }

        // Theme management with localStorage save
        function initializeTheme() {
            const savedTheme = localStorage.getItem('mtech-theme') || 'orange';
            const savedCustomColor = localStorage.getItem('mtech-custom-color');

            if (savedTheme === 'custom' && savedCustomColor) {
                setCustomTheme(savedCustomColor);
            } else {
                setTheme(savedTheme);
            }

            updateCurrentThemeDisplay();
        }

        function setTheme(theme) {
            // Remove existing theme classes
            document.documentElement.classList.remove('theme-orange', 'theme-green', 'theme-blue', 'theme-purple', 'theme-red', 'theme-teal', 'theme-custom');

            // Clear any custom CSS properties that might have been set
            document.documentElement.style.removeProperty('--primary-color');
            document.documentElement.style.removeProperty('--primary-dark');
            document.documentElement.style.removeProperty('--primary-rgb');
            document.documentElement.style.removeProperty('--primary-dark-rgb');
            document.documentElement.style.removeProperty('--border-color');
            document.documentElement.style.removeProperty('--border-hover');
            document.documentElement.style.removeProperty('--glow-color');

            // Add new theme class
            document.documentElement.classList.add(`theme-${theme}`);

            // Save theme to localStorage
            localStorage.setItem('mtech-theme', theme);

            return theme;
        }

        function setCustomTheme(color) {
            document.documentElement.classList.remove('theme-orange', 'theme-green', 'theme-blue', 'theme-purple', 'theme-red', 'theme-teal', 'theme-custom');
            document.documentElement.classList.add('theme-custom');

            const darkerColor = adjustColorBrightness(color, -0.15);
            const rgb = hexToRgb(color);
            const darkerRgb = hexToRgb(darkerColor);

            document.documentElement.style.setProperty('--primary-color', color);
            document.documentElement.style.setProperty('--primary-dark', darkerColor);
            document.documentElement.style.setProperty('--primary-rgb', `${rgb.r}, ${rgb.g}, ${rgb.b}`);
            document.documentElement.style.setProperty('--primary-dark-rgb', `${darkerRgb.r}, ${darkerRgb.g}, ${darkerRgb.b}`);
            document.documentElement.style.setProperty('--border-color', `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.15)`);
            document.documentElement.style.setProperty('--border-hover', `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.3)`);
            document.documentElement.style.setProperty('--glow-color', `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.4)`);

            localStorage.setItem('mtech-theme', 'custom');
            localStorage.setItem('mtech-custom-color', color);

            return 'custom';
        }

        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function adjustColorBrightness(hex, percent) {
            const rgb = hexToRgb(hex);
            if (!rgb) return hex;

            const adjust = (color) => {
                const adjusted = Math.round(color * (1 + percent));
                return Math.max(0, Math.min(255, adjusted));
            };

            const r = adjust(rgb.r).toString(16).padStart(2, '0');
            const g = adjust(rgb.g).toString(16).padStart(2, '0');
            const b = adjust(rgb.b).toString(16).padStart(2, '0');

            return `#${r}${g}${b}`;
        }

        function openColorPickerModal() {
            const modal = document.getElementById('color-picker-modal');
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            updateCurrentThemeDisplay();
        }

        function closeColorPickerModal() {
            const modal = document.getElementById('color-picker-modal');
            modal.style.display = 'none';
            document.body.style.overflow = '';
        }

        function updateCurrentThemeDisplay() {
            const currentThemeDisplay = document.getElementById('current-theme-display');
            if (!currentThemeDisplay) return;

            const currentTheme = localStorage.getItem('mtech-theme') || 'orange';
            const customColor = localStorage.getItem('mtech-custom-color');

            if (currentTheme === 'custom' && customColor) {
                currentThemeDisplay.innerHTML = `<strong>Custom Theme</strong> - ${customColor.toUpperCase()}`;
            } else {
                const themeNames = {
                    'orange': 'Orange',
                    'green': 'Green',
                    'blue': 'Blue',
                    'purple': 'Purple',
                    'red': 'Red',
                    'teal': 'Teal'
                };
                const themeName = themeNames[currentTheme] || 'Orange';
                const themeColors = {
                    'orange': '#ff6b35',
                    'green': '#43a047',
                    'blue': '#2196f3',
                    'purple': '#9c27b0',
                    'red': '#f44336',
                    'teal': '#009688'
                };
                const themeColor = themeColors[currentTheme] || '#ff6b35';
                currentThemeDisplay.innerHTML = `<strong>${themeName} Theme</strong> - ${themeColor.toUpperCase()}`;
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            initializeTheme();
            const themeBtn = document.getElementById('theme-toggle-btn');
            if (themeBtn) {
                themeBtn.addEventListener('click', function() {
                    openColorPickerModal();
                });
            }

            // Color picker modal event listeners
            const colorPickerModal = document.getElementById('color-picker-modal');
            if (colorPickerModal) {
                colorPickerModal.addEventListener('click', function(e) {
                    if (e.target === colorPickerModal) {
                        closeColorPickerModal();
                    }
                });

                const presetButtons = document.querySelectorAll('.theme-preset-btn');
                presetButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const theme = this.getAttribute('data-theme');
                        setTheme(theme);
                        updateCurrentThemeDisplay();
                        showNotification(`Switched to ${theme} theme`, 'success');
                        closeColorPickerModal();
                    });
                });

                const customColorPicker = document.getElementById('custom-color-picker');
                const colorPreview = document.getElementById('color-preview');

                if (customColorPicker && colorPreview) {
                    customColorPicker.addEventListener('input', function() {
                        colorPreview.textContent = this.value.toUpperCase();
                    });
                }

                const applyCustomColorBtn = document.getElementById('apply-custom-color');
                if (applyCustomColorBtn) {
                    applyCustomColorBtn.addEventListener('click', function() {
                        const customColor = customColorPicker.value;
                        setCustomTheme(customColor);
                        updateCurrentThemeDisplay();
                        showNotification(`Applied custom color: ${customColor.toUpperCase()}`, 'success');
                        closeColorPickerModal();
                    });
                }
            }

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const modal = document.getElementById('color-picker-modal');
                    if (modal && modal.style.display === 'flex') {
                        closeColorPickerModal();
                    }
                }
            });
        });
    </script>

    <!-- Color Picker Modal -->
    <div id="color-picker-modal" class="mtech-modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); backdrop-filter: blur(8px); z-index: 2000; justify-content: center; align-items: center; padding: 20px;">
        <div class="mtech-modal-content" style="background-color: #181818; padding: 30px 40px; border-radius: 16px; border: 1px solid var(--border-color); box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5); max-width: 500px; width: 100%; max-height: 85vh; overflow-y: auto; position: relative; color: #e0e0e0;">
            <button class="modal-close-btn" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 1.8rem; color: #aaa; cursor: pointer; padding: 5px; transition: color 0.3s ease;" onclick="closeColorPickerModal()">&times;</button>

            <div class="modal-title-area" style="display: flex; align-items: center; gap: 15px; color: var(--primary-color); margin-bottom: 25px; border-bottom: 1px solid var(--border-color); padding-bottom: 20px;">
                <i class="fas fa-palette" style="font-size: 2rem;"></i>
                <h2 style="font-size: 1.8rem; margin: 0;">Customize Theme</h2>
            </div>

            <!-- Preset Themes Section -->
            <div class="modal-section" style="margin-bottom: 30px;">
                <h3 style="color: var(--primary-color); margin-bottom: 15px; font-size: 1.2rem;">Preset Themes</h3>
                <div class="theme-presets" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px;">
                    <button class="theme-preset-btn" data-theme="orange" style="background: linear-gradient(135deg, #ff6b35, #e55a2b); color: #000; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fas fa-fire"></i> Orange
                    </button>
                    <button class="theme-preset-btn" data-theme="green" style="background: linear-gradient(135deg, #43a047, #388e3c); color: #fff; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fas fa-leaf"></i> Green
                    </button>
                    <button class="theme-preset-btn" data-theme="blue" style="background: linear-gradient(135deg, #2196f3, #1976d2); color: #fff; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fas fa-water"></i> Blue
                    </button>
                    <button class="theme-preset-btn" data-theme="purple" style="background: linear-gradient(135deg, #9c27b0, #7b1fa2); color: #fff; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fas fa-gem"></i> Purple
                    </button>
                    <button class="theme-preset-btn" data-theme="red" style="background: linear-gradient(135deg, #f44336, #d32f2f); color: #fff; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fas fa-heart"></i> Red
                    </button>
                    <button class="theme-preset-btn" data-theme="teal" style="background: linear-gradient(135deg, #009688, #00796b); color: #fff; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fas fa-wave-square"></i> Teal
                    </button>
                </div>
            </div>

            <!-- Custom Color Section -->
            <div class="modal-section" style="margin-bottom: 25px;">
                <h3 style="color: var(--primary-color); margin-bottom: 15px; font-size: 1.2rem;">Custom Color</h3>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <label for="custom-color-picker" style="color: #c0c0c0; font-weight: 600; min-width: 100px;">Primary Color:</label>
                        <input type="color" id="custom-color-picker" value="#ff6b35" style="width: 60px; height: 40px; border: none; border-radius: 8px; cursor: pointer; background: none;">
                        <span id="color-preview" style="color: #c0c0c0; font-family: 'Courier New', monospace; font-size: 0.9rem; padding: 8px 12px; background: rgba(255, 255, 255, 0.05); border-radius: 6px; border: 1px solid rgba(255, 255, 255, 0.1);">#ff6b35</span>
                    </div>
                    <button id="apply-custom-color" class="mtech-btn" style="background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); color: #000; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
                        <i class="fas fa-check"></i> Apply Custom Color
                    </button>
                </div>
            </div>

            <!-- Current Theme Display -->
            <div class="modal-section">
                <h3 style="color: var(--primary-color); margin-bottom: 15px; font-size: 1.2rem;">Current Theme</h3>
                <div id="current-theme-display" style="padding: 15px; background: rgba(255, 255, 255, 0.03); border-radius: 8px; border-left: 4px solid var(--primary-color); color: #c0c0c0;">
                    <strong>Orange Theme</strong> - #ff6b35
                </div>
            </div>
        </div>
    </div>

</body>
</html>
